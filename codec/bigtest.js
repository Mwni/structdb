const data = JSON.parse(`{"ledgerIndices":[71171325,71171550,71171775,71172000,71172225,71172450,71172675,71172900,71173125,71173350],"ledgerTimes":[1650673202,1650674090,1650674980,1650675860,1650676750,1650677640,1650678530,1650679411,1650680300,1650681182],"tokens":[{"currency":"XRP","issuer":null,"timeline":[{"tx":0,"ledgerIndex":68944964,"balanceChange":"10.001","valueChange":"10.001"},{"tx":1,"ledgerIndex":68944966,"balanceChange":"-0.000042","valueChange":"-0.000042"},{"tx":2,"ledgerIndex":68944967,"balanceChange":"-0.000042","valueChange":"-0.000042"},{"tx":3,"ledgerIndex":69819347,"balanceChange":"74","valueChange":"74"},{"tx":4,"ledgerIndex":69821953,"balanceChange":"-0.000015","valueChange":"-0.000015"},{"tx":5,"ledgerIndex":69825830,"balanceChange":"-0.000015","valueChange":"-0.000015"},{"tx":6,"ledgerIndex":69825878,"balanceChange":"-0.000015","valueChange":"-0.000015"},{"tx":7,"ledgerIndex":69826083,"balanceChange":"-5.153019","valueChange":"-5.153019"},{"tx":8,"ledgerIndex":69836657,"balanceChange":"-0.000015","valueChange":"-0.000015"},{"tx":9,"ledgerIndex":69837859,"balanceChange":"-0.000015","valueChange":"-0.000015"},{"tx":10,"ledgerIndex":69837903,"balanceChange":"-0.000225","valueChange":"-0.000225"},{"tx":11,"ledgerIndex":69837937,"balanceChange":"-0.000225","valueChange":"-0.000225"},{"tx":12,"ledgerIndex":69837959,"balanceChange":"-0.000225","valueChange":"-0.000225"},{"tx":13,"ledgerIndex":69838031,"balanceChange":"-0.000015","valueChange":"-0.000015"},{"tx":14,"ledgerIndex":69838072,"balanceChange":"-0.000225","valueChange":"-0.000225"},{"tx":15,"ledgerIndex":69843944,"balanceChange":"-13.173621","valueChange":"-13.173621"},{"tx":16,"ledgerIndex":69843990,"balanceChange":"-0.000015","valueChange":"-0.000015"},{"tx":17,"ledgerIndex":69844125,"balanceChange":"-0.000015","valueChange":"-0.000015"},{"tx":18,"ledgerIndex":69844401,"balanceChange":"-0.000015","valueChange":"-0.000015"},{"tx":19,"ledgerIndex":69844582,"balanceChange":"-0.000225","valueChange":"-0.000225"},{"tx":20,"ledgerIndex":69844670,"balanceChange":"-0.000015","valueChange":"-0.000015"},{"tx":21,"ledgerIndex":69844699,"balanceChange":"-1.334749","valueChange":"-1.334749"},{"tx":22,"ledgerIndex":69844907,"balanceChange":"-0.000015","valueChange":"-0.000015"},{"tx":23,"ledgerIndex":69844943,"balanceChange":"-0.000015","valueChange":"-0.000015"},{"tx":24,"ledgerIndex":69845183,"balanceChange":"-0.000015","valueChange":"-0.000015"},{"tx":25,"ledgerIndex":69845207,"balanceChange":"-1.330714","valueChange":"-1.330714"},{"tx":26,"ledgerIndex":69845220,"balanceChange":"-1.329007","valueChange":"-1.329007"},{"tx":27,"ledgerIndex":69846135,"balanceChange":"-4.08583","valueChange":"-4.08583"},{"tx":28,"ledgerIndex":69846165,"balanceChange":"-4.08583","valueChange":"-4.08583"},{"tx":29,"ledgerIndex":69846222,"balanceChange":"-0.000015","valueChange":"-0.000015"},{"tx":30,"ledgerIndex":69846280,"balanceChange":"-0.585917","valueChange":"-0.585917"},{"tx":31,"ledgerIndex":69863632,"balanceChange":"-0.518513","valueChange":"-0.518513"},{"tx":32,"ledgerIndex":69863737,"balanceChange":"-0.516612","valueChange":"-0.516612"},{"tx":33,"ledgerIndex":69863771,"balanceChange":"-0.516402","valueChange":"-0.516402"},{"tx":34,"ledgerIndex":69863795,"balanceChange":"-0.000015","valueChange":"-0.000015"},{"tx":35,"ledgerIndex":69863855,"balanceChange":"-0.000225","valueChange":"-0.000225"},{"tx":36,"ledgerIndex":69864200,"balanceChange":"-0.000015","valueChange":"-0.000015"},{"tx":37,"ledgerIndex":69864234,"balanceChange":"-0.000015","valueChange":"-0.000015"},{"tx":38,"ledgerIndex":69864245,"balanceChange":"-0.000225","valueChange":"-0.000225"},{"tx":39,"ledgerIndex":69864251,"balanceChange":"-0.000015","valueChange":"-0.000015"},{"tx":40,"ledgerIndex":69864452,"balanceChange":"0.502064","valueChange":"0.502064"},{"tx":41,"ledgerIndex":69911781,"balanceChange":"1.418425","valueChange":"1.418425"},{"tx":42,"ledgerIndex":69911792,"balanceChange":"-1.471951","valueChange":"-1.471951"},{"tx":43,"ledgerIndex":69911938,"balanceChange":"-1.482236","valueChange":"-1.482236"},{"tx":44,"ledgerIndex":69912100,"balanceChange":"-1.469416","valueChange":"-1.469416"},{"tx":45,"ledgerIndex":69912395,"balanceChange":"-1.468351","valueChange":"-1.468351"},{"tx":46,"ledgerIndex":69912456,"balanceChange":"1.424487","valueChange":"1.424487"},{"tx":47,"ledgerIndex":69912472,"balanceChange":"1.424487","valueChange":"1.424487"},{"tx":48,"ledgerIndex":69912716,"balanceChange":"-0.000015","valueChange":"-0.000015"},{"tx":49,"ledgerIndex":69912800,"balanceChange":"-0.000015","valueChange":"-0.000015"},{"tx":50,"ledgerIndex":69912968,"balanceChange":"-0.000015","valueChange":"-0.000015"},{"tx":51,"ledgerIndex":69912983,"balanceChange":"-1.469235","valueChange":"-1.469235"},{"tx":52,"ledgerIndex":69913010,"balanceChange":"-0.000015","valueChange":"-0.000015"},{"tx":53,"ledgerIndex":69913018,"balanceChange":"-0.000015","valueChange":"-0.000015"},{"tx":54,"ledgerIndex":69913035,"balanceChange":"-0.000015","valueChange":"-0.000015"},{"tx":55,"ledgerIndex":69913042,"balanceChange":"-0.000015","valueChange":"-0.000015"},{"tx":56,"ledgerIndex":69913051,"balanceChange":"-0.000015","valueChange":"-0.000015"},{"tx":57,"ledgerIndex":69914211,"balanceChange":"-0.000015","valueChange":"-0.000015"},{"tx":58,"ledgerIndex":69914313,"balanceChange":"-0.000015","valueChange":"-0.000015"},{"tx":59,"ledgerIndex":69979424,"balanceChange":"-1.433525","valueChange":"-1.433525"},{"tx":60,"ledgerIndex":69979435,"balanceChange":"-1.430571","valueChange":"-1.430571"},{"tx":61,"ledgerIndex":69979441,"balanceChange":"-1.430571","valueChange":"-1.430571"},{"tx":62,"ledgerIndex":69979446,"balanceChange":"-1.430571","valueChange":"-1.430571"},{"tx":63,"ledgerIndex":69979454,"balanceChange":"-1.430571","valueChange":"-1.430571"},{"tx":64,"ledgerIndex":70090305,"balanceChange":"-0.000015","valueChange":"-0.000015"},{"tx":65,"ledgerIndex":70090338,"balanceChange":"-0.000015","valueChange":"-0.000015"},{"tx":66,"ledgerIndex":70090431,"balanceChange":"-0.000015","valueChange":"-0.000015"},{"tx":67,"ledgerIndex":70090456,"balanceChange":"-0.000015","valueChange":"-0.000015"},{"tx":68,"ledgerIndex":70090497,"balanceChange":"-0.000015","valueChange":"-0.000015"},{"tx":69,"ledgerIndex":70090945,"balanceChange":"-0.000015","valueChange":"-0.000015"},{"tx":70,"ledgerIndex":70090967,"balanceChange":"-0.000015","valueChange":"-0.000015"},{"tx":71,"ledgerIndex":70091806,"balanceChange":"-0.000015","valueChange":"-0.000015"},{"tx":72,"ledgerIndex":70091814,"balanceChange":"-1.451091","valueChange":"-1.451091"},{"tx":73,"ledgerIndex":70091992,"balanceChange":"-1.453942","valueChange":"-1.453942"},{"tx":74,"ledgerIndex":70092035,"balanceChange":"1.40631","valueChange":"1.40631"},{"tx":75,"ledgerIndex":70092071,"balanceChange":"1.400886","valueChange":"1.400886"},{"tx":76,"ledgerIndex":70092080,"balanceChange":"1.400584","valueChange":"1.400584"},{"tx":77,"ledgerIndex":70092110,"balanceChange":"-0.000015","valueChange":"-0.000015"},{"tx":78,"ledgerIndex":70092132,"balanceChange":"-0.000015","valueChange":"-0.000015"},{"tx":79,"ledgerIndex":70092139,"balanceChange":"-0.000015","valueChange":"-0.000015"},{"tx":80,"ledgerIndex":70092147,"balanceChange":"-0.000015","valueChange":"-0.000015"},{"tx":81,"ledgerIndex":70092172,"balanceChange":"-0.000015","valueChange":"-0.000015"},{"tx":82,"ledgerIndex":70092184,"balanceChange":"-0.000015","valueChange":"-0.000015"},{"tx":83,"ledgerIndex":70092194,"balanceChange":"-0.000015","valueChange":"-0.000015"},{"tx":84,"ledgerIndex":70134481,"balanceChange":"-0.000015","valueChange":"-0.000015"},{"tx":85,"ledgerIndex":70134520,"balanceChange":"-0.000015","valueChange":"-0.000015"},{"tx":86,"ledgerIndex":70134620,"balanceChange":"-0.000015","valueChange":"-0.000015"},{"tx":87,"ledgerIndex":70134673,"balanceChange":"-0.000015","valueChange":"-0.000015"},{"tx":88,"ledgerIndex":70134690,"balanceChange":"-0.000015","valueChange":"-0.000015"},{"tx":89,"ledgerIndex":70134744,"balanceChange":"-0.000015","valueChange":"-0.000015"},{"tx":90,"ledgerIndex":70134814,"balanceChange":"-0.000015","valueChange":"-0.000015"},{"tx":91,"ledgerIndex":70134836,"balanceChange":"-0.000015","valueChange":"-0.000015"},{"tx":92,"ledgerIndex":70134863,"balanceChange":"1.384734","valueChange":"1.384734"},{"tx":93,"ledgerIndex":70135167,"balanceChange":"-0.000015","valueChange":"-0.000015"},{"tx":94,"ledgerIndex":70135269,"balanceChange":"-0.000015","valueChange":"-0.000015"},{"tx":95,"ledgerIndex":70135281,"balanceChange":"5.832833","valueChange":"5.832833"},{"tx":96,"ledgerIndex":70135786,"balanceChange":"-0.000015","valueChange":"-0.000015"},{"tx":97,"ledgerIndex":70461339,"balanceChange":"-0.000015","valueChange":"-0.000015"},{"tx":98,"ledgerIndex":70461794,"balanceChange":"-0.000015","valueChange":"-0.000015"},{"tx":99,"ledgerIndex":70461816,"balanceChange":"0.084485","valueChange":"0.084485"},{"tx":100,"ledgerIndex":70461874,"balanceChange":"0.083985","valueChange":"0.083985"},{"tx":101,"ledgerIndex":70461894,"balanceChange":"0.083985","valueChange":"0.083985"},{"tx":102,"ledgerIndex":70462010,"balanceChange":"1.185039","valueChange":"1.185039"},{"tx":103,"ledgerIndex":70462044,"balanceChange":"0.082592","valueChange":"0.082592"},{"tx":104,"ledgerIndex":70462073,"balanceChange":"0.082595","valueChange":"0.082595"},{"tx":105,"ledgerIndex":70462190,"balanceChange":"0.081986","valueChange":"0.081986"},{"tx":106,"ledgerIndex":70471330,"balanceChange":"-1.000015","valueChange":"-1.000015"}],"valuations":["50.825718","50.825718","50.825718","50.825718","50.825718","50.825718","50.825718","50.825718","50.825718","50.825718"]},{"currency":"ELS","issuer":"rHXuEaRYnnJHbDeuBH5w8yPh5uwNVh5zAg","timeline":[{"tx":7,"ledgerIndex":69826083,"balanceChange":"100.0100029097427","valueChange":"5.1530040000000360675"},{"tx":30,"ledgerIndex":69846280,"balanceChange":"10.2999982723632","valueChange":"0.585902"},{"tx":99,"ledgerIndex":70461816,"balanceChange":"-1","valueChange":"-0.084499999999999999999"},{"tx":100,"ledgerIndex":70461874,"balanceChange":"-1","valueChange":"-0.083999999999999999999"},{"tx":101,"ledgerIndex":70461894,"balanceChange":"-1","valueChange":"-0.083999999999999999999"},{"tx":103,"ledgerIndex":70462044,"balanceChange":"-1","valueChange":"-0.082606999999999999998"},{"tx":104,"ledgerIndex":70462073,"balanceChange":"-1","valueChange":"-0.082610000000000000003"},{"tx":105,"ledgerIndex":70462190,"balanceChange":"-1","valueChange":"-0.082000999999999999999"}],"valuations":["4.1880465481824552338","4.1883829822104525447","4.1973080098073072025","4.1974344649506277273","4.1888868177532854197","4.1880465588331631555","4.1889554457973403626","4.1849170391609396547","4.1849170391609396547","4.1880480103290259154"]},{"currency":"USD","issuer":"rvYAfWj5gh67oV6fW32ZzP3Aw4Eubs59B","timeline":[{"tx":15,"ledgerIndex":69843944,"balanceChange":"10.00000033916218","valueChange":"13.173606000000105388"},{"tx":21,"ledgerIndex":69844699,"balanceChange":"1.00000026107018","valueChange":"1.3347340000001067787"},{"tx":25,"ledgerIndex":69845207,"balanceChange":"1.00112671310654","valueChange":"1.3304890000000531596"},{"tx":26,"ledgerIndex":69845220,"balanceChange":"1.00000029515832","valueChange":"1.3289920000000265799"},{"tx":27,"ledgerIndex":69846135,"balanceChange":"3.08999963420646","valueChange":"4.0858150000000793364"},{"tx":28,"ledgerIndex":69846165,"balanceChange":"3.08999963420646","valueChange":"4.0858150000000793364"},{"tx":41,"ledgerIndex":69911781,"balanceChange":"-1.002","valueChange":"-1.42127688"},{"tx":42,"ledgerIndex":69911792,"balanceChange":"1.031318030136","valueChange":"1.471936"},{"tx":43,"ledgerIndex":69911938,"balanceChange":"1.03100272734712","valueChange":"1.482221000000172518"},{"tx":44,"ledgerIndex":69912100,"balanceChange":"1.02881486749672","valueChange":"1.4694010000000285649"},{"tx":45,"ledgerIndex":69912395,"balanceChange":"1.02999967936879","valueChange":"1.4683360000001283012"},{"tx":46,"ledgerIndex":69912456,"balanceChange":"-1.002","valueChange":"-1.427351004"},{"tx":47,"ledgerIndex":69912472,"balanceChange":"-1.002","valueChange":"-1.427351004"},{"tx":51,"ledgerIndex":69912983,"balanceChange":"1.02999980324985","valueChange":"1.4692200000012124633"},{"tx":59,"ledgerIndex":69979424,"balanceChange":"1.02999977977373","valueChange":"1.4335100000000417528"},{"tx":60,"ledgerIndex":69979435,"balanceChange":"1.03000032","valueChange":"1.430556"},{"tx":61,"ledgerIndex":69979441,"balanceChange":"1.03000032","valueChange":"1.430556"},{"tx":62,"ledgerIndex":69979446,"balanceChange":"1.03000032","valueChange":"1.430556"},{"tx":63,"ledgerIndex":69979454,"balanceChange":"1.03000032","valueChange":"1.430556"},{"tx":72,"ledgerIndex":70091814,"balanceChange":"1.02999965378692","valueChange":"1.4510760000012961071"},{"tx":73,"ledgerIndex":70091992,"balanceChange":"1.03000011755186","valueChange":"1.4539270000012139583"},{"tx":74,"ledgerIndex":70092035,"balanceChange":"-1.002","valueChange":"-1.40913765"},{"tx":75,"ledgerIndex":70092071,"balanceChange":"-1.002","valueChange":"-1.403702802"},{"tx":76,"ledgerIndex":70092080,"balanceChange":"-1.002","valueChange":"-1.403400198"},{"tx":92,"ledgerIndex":70134863,"balanceChange":"-1.002","valueChange":"-1.3877289180011101831"},{"tx":95,"ledgerIndex":70135281,"balanceChange":"-4.2084","valueChange":"-5.8445136959999999999"},{"tx":102,"ledgerIndex":70462010,"balanceChange":"-1.002","valueChange":"-1.187424108"}],"valuations":["26.674837368936484663","26.741950056060951112","26.760482993686217665","26.718183902377308259","26.700607301624595876","26.660517161790423527","26.698564037670165639","26.738346610805265361","26.801425066342896567","26.774844221284071909"]},{"currency":"534F4C4F00000000000000000000000000000000","issuer":"rsoLo2S1kiGeCcn6hCUXVrCpGMWLrRrLZz","timeline":[{"tx":31,"ledgerIndex":69863632,"balanceChange":"1.029999143020087","valueChange":"0.5184980000000437955"},{"tx":32,"ledgerIndex":69863737,"balanceChange":"1.030000076138107","valueChange":"0.51638700000000350942"},{"tx":33,"ledgerIndex":69863771,"balanceChange":"1.030000076138107","valueChange":"0.51638700000000350942"},{"tx":40,"ledgerIndex":69864452,"balanceChange":"-1.0001","valueChange":"-0.5021292079"}],"valuations":["1.5961466293373307453","1.5989495554528498109","1.6005380502265244512","1.6029695163813497511","1.5969036203033596121","1.6038096162234033635","1.597293564976552112","1.598789676247735595","1.6033099826383606408","1.5979215580400219555"]}]}`)



const schema = {
	type: 'object',
	properties: {
		ledgerIndices: {
			type: 'array',
			items: {
				type: 'integer'
			}
		},
		ledgerTimes: {
			type: 'array',
			items: {
				type: 'integer'
			}
		},
		tokens: {
			type: 'array',
			items: {
				type: 'object',
				properties: {
					currency: {
						type: 'string'
					},
					issuer: {
						type: 'string'
					},
					timeline: {
						type: 'array',
						items: {
							type: 'object',
							properties: {
								tx: {
									type: 'integer'
								},
								ledgerIndex: {
									type: 'integer'
								},
								balanceChange: {
									type: 'string'
								},
								valueChange: {
									type: 'string'
								}
							},
							required: [
								'tx',
								'ledgerIndex',
								'balanceChange',
								'valueChange'
							]
						}
					},
					valuations: {
						type: 'array',
						items: {
							type: 'string'
						}
					}
				},
				required: [
					'currency',
					'issuer',
					'timeline',
					'valuations'
				]
			}
		}
	},
	required: [
		'ledgerIndices', 
		'ledgerTimes', 
		'tokens'
	]
}

import Codec from './Codec.js'

let codec = new Codec(schema)
let encoded = codec.encode(data)
let decoded = codec.decode(encoded)

console.log(encoded)
console.log(decoded.tokens)